import{j as e,c as S,r as u,H as _,b as o,L as k}from"./app-D1cPCX6f.js";import{C as j,a as C,b as T}from"./card-B_YAuBpD.js";import{A as L,t as B}from"./app-layout-JfI-3jXo.js";import{d as D}from"./index-D329iiHL.js";import{T as R,a as I,b as g,c as l,d as q,e as t}from"./table-Bfk89GeZ.js";import P from"./edit-rider-DJwfjbPX.js";import{I as b}from"./input-DkW3OCNc.js";import{B as v}from"./button-12D4eAXA.js";import{s as c}from"./index-ikzcNs2d.js";import A from"./customer-detail-Dt8Aw_or.js";import{B as E}from"./badge-ZzSDneBq.js";/* empty css            */import"./index-CO8mIJ9n.js";import"./index-Be5VJJmr.js";import"./index-C8rq69fI.js";import"./index-yxlS-ic7.js";import"./index-DP1-YIpU.js";import"./createLucideIcon--7v9fMXy.js";import"./index-CMWG4mbA.js";import"./app-logo-icon-BajOGPmw.js";import"./index-gJQW8Ur0.js";import"./alert-dialog-Bc1QN5ud.js";import"./label-litEkrYM.js";import"./bike-ClfTljT8.js";const H={pickup:{label:"Pick Up",className:"bg-yellow-100 text-yellow-800"},customer_booked:{label:"Customer Will Book",className:"bg-blue-100 text-blue-800"},staff_booked:{label:"I Will Book",className:"bg-green-100 text-green-800"}},O=({type:i})=>{const r=H[i];return r?e.jsx(E,{className:r.className,children:r.label}):null},M=[{title:"Dashboard",href:D().url}],f={pending:{label:"Not Yet Started",className:"bg-gray-100 text-gray-800"},"in-progress":{label:"Preparing",className:"bg-yellow-100 text-yellow-800"},ready:{label:"Ready",className:"bg-blue-100 text-blue-800"},completed:{label:"Completed",className:"bg-green-100 text-green-800"}},xe=({orders:i,productCounts:r,date:N})=>{const{props:U}=S(),[d,p]=u.useState(""),[m,h]=u.useState(N),y=()=>{o.get(c("lalamove.index"),{search:d,date:m},{preserveState:!0,replace:!0})},w=()=>{p("");const s=new URLSearchParams(window.location.search).get("date")||new Date().toISOString().split("T")[0];h(s),o.get(c("lalamove.index"),{date:s,search:""},{preserveState:!0})};return e.jsxs(L,{breadcrumbs:M,children:[e.jsx(_,{title:"Lalamove Riders"}),e.jsxs("div",{className:"",children:[e.jsx(b,{type:"date",value:m,onChange:a=>{const s=a.target.value;h(s),o.get(c("lalamove.index"),{date:s,search:d},{preserveState:!0,replace:!0})},className:"w-auto mb-4"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-6 gap-4 pb-4",children:r.map(a=>{const s=a.total_quantity-a.completed_quantity;return e.jsxs(j,{className:`p-4 ${s===0?"bg-green-700 border-green-500":""}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-semibold text-lg",children:a.product_name}),e.jsxs("div",{className:"text-lg font-bold",children:[a.completed_quantity," / ",a.total_quantity]})]}),e.jsxs("div",{className:"text-sm text-gray-300",children:["REMAINING: ",s]})]},a.product_id)})}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex sm:flex-row flex-col sm:justify-between  items-center sm:items-start pb-4 gap-4 sm:gap-0",children:[e.jsx(C,{className:"px-6 ",children:e.jsxs("div",{className:"inline-flex gap-2 text-lg font-bold",children:["Orders for ",e.jsx("p",{className:"underline",children:new Date(m).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})]})}),e.jsxs("div",{className:"flex gap-2 items-center mr-4",children:[e.jsx(b,{placeholder:"Search Customer...",value:d,onChange:a=>p(a.target.value),className:"w-full"}),e.jsx(v,{onClick:()=>y(),type:"button",children:"Search"}),e.jsx(v,{onClick:w,variant:"secondary",type:"button",children:"Reset"})]})]}),e.jsx(T,{className:"p-0",children:e.jsxs(R,{children:[e.jsx(I,{children:e.jsxs(g,{children:[e.jsx(l,{children:"#"}),e.jsx(l,{children:"Customer"}),e.jsx(l,{children:"Order"}),e.jsx(l,{children:"Delivery Time & Address"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Notes"}),e.jsx(l,{children:"Lalamove"}),e.jsx(l,{children:"Link"}),e.jsx(l,{})]})}),e.jsx(q,{children:i.data.map((a,s)=>e.jsxs(g,{children:[e.jsx(t,{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(O,{type:a.booking_type}),e.jsx(k,{href:B.show(a.transaction_id).url,children:e.jsx("div",{className:"text-blue-500",children:a.transaction.order_number})})]})}),e.jsx(t,{children:e.jsx(A,{customer:a.transaction.customer})}),e.jsxs(t,{children:[a.quantity," - ",a.product_name]}),e.jsx(t,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{children:a.delivery_time}),e.jsx("div",{className:"text-xs text-gray-400 max-w-[200px] whitespace-normal break-words",children:a.delivery_address})]})}),e.jsx(t,{children:e.jsx("select",{value:a.status,onChange:n=>{const x=n.target.value;o.put(c("lalamove.updateStatus",a.id),{status:x},{preserveScroll:!0,onSuccess:()=>{}})},className:`px-2 py-1 rounded ${f[a.status]?.className||"bg-gray-100 text-gray-800"}`,children:Object.entries(f).map(([n,x])=>e.jsx("option",{value:n,children:x.label},n))})}),e.jsx(t,{className:"max-w-[250px] whitespace-normal break-words",children:a.memo}),e.jsx(t,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{children:a.lalamove&&a.lalamove.contact_no}),e.jsx("div",{className:"text-xs text-gray-400",children:a.lalamove&&a.lalamove.rider_name})]})}),e.jsx(t,{children:a.lalamove&&a.lalamove.memo&&e.jsx("a",{href:a.lalamove.memo,className:"text-blue-600 underline",target:"_blank",children:"Link"})}),e.jsx(t,{children:e.jsx(P,{order:a})})]},s))})]})})]})]})]})};export{xe as default};
