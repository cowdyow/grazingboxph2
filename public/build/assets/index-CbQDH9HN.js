import{c as _,r as h,j as e,H as k,b as n,L as C}from"./app-B-2JeO2f.js";import{C as p,a as L,b as T}from"./card-Buqw8lcG.js";import{A as D,t as R}from"./app-layout-Bhf3e-Rg.js";import{d as B}from"./index-D329iiHL.js";import{T as I,a as q,b as u,c as l,d as A,e as t}from"./table-Lz4ehIu0.js";import{B as j}from"./badge-Dz9L7HUX.js";import P from"./edit-rider-CZL_VVsD.js";import{I as b}from"./input-DpYeXLQp.js";import{B as g}from"./button-D9FjKu33.js";import{s as o}from"./index-ikzcNs2d.js";import E from"./customer-detail-C-qj42J_.js";/* empty css            */import"./index-DKTs4Soh.js";import"./index-Lo6P_dpq.js";import"./index-BUXgqcHd.js";import"./index-BjuCAOtZ.js";import"./index-DdqV0amG.js";import"./createLucideIcon-CWJbsRWA.js";import"./index-CMWG4mbA.js";import"./app-logo-icon-BcboVOzy.js";import"./index-gJQW8Ur0.js";import"./alert-dialog-B7JDQ2Ra.js";import"./label-ze-wSye_.js";import"./bike-9Pdl41K8.js";const H=[{title:"Dashboard",href:B().url}],v={pending:{label:"Not Yet Started",className:"bg-gray-100 text-gray-800"},"in-progress":{label:"Preparing",className:"bg-yellow-100 text-yellow-800"},ready:{label:"Ready",className:"bg-blue-100 text-blue-800"},completed:{label:"Completed",className:"bg-green-100 text-green-800"}},O={pickup:{label:"Pick Up",className:"bg-yellow-100 text-yellow-800"},customer_booked:{label:"Customer Will Book",className:"bg-blue-100 text-blue-800"},staff_booked:{label:"I Will Book",className:"bg-green-100 text-green-800"}},me=({orders:N,productCounts:y,date:f})=>{const{props:M}=_(),[c,m]=h.useState(""),[i,x]=h.useState(f),S=()=>{n.get(o("lalamove.index"),{search:c,date:i},{preserveState:!0,replace:!0})},w=()=>{m("");const s=new URLSearchParams(window.location.search).get("date")||new Date().toISOString().split("T")[0];x(s),n.get(o("lalamove.index"),{date:s,search:""},{preserveState:!0})};return e.jsxs(D,{breadcrumbs:H,children:[e.jsx(k,{title:"Lalamove Riders"}),e.jsxs("div",{className:"",children:[e.jsx(b,{type:"date",value:i,onChange:a=>{const s=a.target.value;x(s),n.get(o("lalamove.index"),{date:s,search:c},{preserveState:!0,replace:!0})},className:"w-auto mb-4"}),e.jsx("div",{className:"grid grid-cols-6 gap-4 pb-4",children:y.map(a=>{const s=a.total_quantity-a.completed_quantity;return e.jsxs(p,{className:`p-4 ${s===0?"bg-green-700 border-green-500":""}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-semibold text-lg",children:a.product_name}),e.jsxs("div",{className:"text-lg font-bold",children:[a.completed_quantity," / ",a.total_quantity]})]}),e.jsxs("div",{className:"text-sm text-gray-300",children:["REMAINING: ",s]})]},a.product_id)})}),e.jsxs(p,{children:[e.jsxs("div",{className:"flex justify-between items-center pb-4",children:[e.jsx(L,{className:"px-6 ",children:e.jsxs("div",{className:"inline-flex gap-2 text-lg font-bold",children:["Orders for ",e.jsx("p",{className:"underline",children:new Date(i).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})]})}),e.jsxs("div",{className:"flex gap-2 items-center mr-4",children:[e.jsx(b,{placeholder:"Search Customer...",value:c,onChange:a=>m(a.target.value),className:"w-full"}),e.jsx(g,{onClick:()=>S(),type:"button",children:"Search"}),e.jsx(g,{onClick:w,variant:"secondary",type:"button",children:"Reset"})]})]}),e.jsx(T,{className:"p-0",children:e.jsxs(I,{children:[e.jsx(q,{children:e.jsxs(u,{children:[e.jsx(l,{children:"#"}),e.jsx(l,{children:"Customer"}),e.jsx(l,{children:"Order"}),e.jsx(l,{children:"Booking Type"}),e.jsx(l,{children:"Delivery Time & Address"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Notes"}),e.jsx(l,{children:"Lalamove"}),e.jsx(l,{children:"Lalamove Link"}),e.jsx(l,{})]})}),e.jsx(A,{children:N.data.map((a,s)=>e.jsxs(u,{children:[e.jsx(t,{children:e.jsx(C,{href:R.show(a.transaction_id).url,children:e.jsx("div",{className:"text-blue-500",children:a.transaction.order_number})})}),e.jsx(t,{children:e.jsx(E,{customer:a.transaction.customer})}),e.jsxs(t,{children:[a.quantity," - ",a.product_name]}),e.jsx(t,{children:(()=>{const r=O[a.booking_type];return r?e.jsx(j,{className:r.className,children:r.label}):e.jsx(j,{variant:"secondary",children:"N/A"})})()}),e.jsx(t,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{children:a.delivery_time}),e.jsx("div",{className:"text-xs text-gray-400",children:a.delivery_address})]})}),e.jsx(t,{children:e.jsx("select",{value:a.status,onChange:r=>{const d=r.target.value;n.put(o("lalamove.updateStatus",a.id),{status:d},{preserveScroll:!0,onSuccess:()=>{}})},className:`px-2 py-1 rounded ${v[a.status]?.className||"bg-gray-100 text-gray-800"}`,children:Object.entries(v).map(([r,d])=>e.jsx("option",{value:r,children:d.label},r))})}),e.jsx(t,{className:"max-w-[300px] whitespace-normal break-words",children:a.memo}),e.jsx(t,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{children:a.lalamove&&a.lalamove.contact_no}),e.jsx("div",{className:"text-xs text-gray-400",children:a.lalamove&&a.lalamove.rider_name})]})}),e.jsx(t,{children:a.lalamove&&a.lalamove.memo&&e.jsx("a",{href:a.lalamove.memo,className:"text-blue-600 underline",target:"_blank",children:"Link"})}),e.jsx(t,{children:e.jsx(P,{order:a})})]},s))})]})})]})]})]})};export{me as default};
